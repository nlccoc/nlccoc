/* global nlccmgmtapp */
nlccmgmtapp.run(["$rootScope", "$state", "$http", "$q", function($rootScope, $state, $http, $q) {
  console.log("nlcc mgmt run");
  $rootScope.$state = $state; // state to be accessed from view
  
  $rootScope.fileexist = function(url) {
    console.log("Check file exist: " + url);
    
    var deferred = $q.defer();
    
    

    /*if(url==''){
      deferred.reject();
      return deferred.promise;
    }*/
    
    $http({
      method: 'GET',
      url: "/utils/aws/isexist.json?url=" + url
    }).success(function(data){
      deferred.resolve(data);
    }).error(function(){
      deferred.reject("There is an error");
    });
    
    return deferred.promise;
  }
  $rootScope.filetype = function(filename) {
    console.log(filename.split('.').pop());
  }
  
  $rootScope.current_mgmt = gon.current_mgmt;
  $rootScope.is_admin = gon.is_admin;
  $rootScope.env = gon.env
  $rootScope.is_unapproved = gon.is_unapproved;
  //$rootScope.$settings = settings; // state to be accessed from view
}]);